{"ast":null,"code":"import _defineProperty from\"/Users/davidefalcone/Universita/Polito/Web Applications I/exam1-car-rental-davidefalcone1 copia/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/davidefalcone/Universita/Polito/Web Applications I/exam1-car-rental-davidefalcone1 copia/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/davidefalcone/Universita/Polito/Web Applications I/exam1-car-rental-davidefalcone1 copia/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/davidefalcone/Universita/Polito/Web Applications I/exam1-car-rental-davidefalcone1 copia/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/davidefalcone/Universita/Polito/Web Applications I/exam1-car-rental-davidefalcone1 copia/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/davidefalcone/Universita/Polito/Web Applications I/exam1-car-rental-davidefalcone1 copia/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Form,Row,Col,Button,Container}from'react-bootstrap';import{Redirect}from'react-router-dom';import{AuthContext}from'../AuthContext.js';var LogInForm=/*#__PURE__*/function(_React$Component){_inherits(LogInForm,_React$Component);var _super=_createSuper(LogInForm);function LogInForm(props){var _this;_classCallCheck(this,LogInForm);_this=_super.call(this,props);_this.continue=function(){_this.setState({continueSelected:true});};_this.updateField=function(name,value){_this.setState(function(state){return{data:_objectSpread(_objectSpread({},state.data),{},_defineProperty({},name,value))};});};_this.onSubmit=function(e,login){e.preventDefault();e.stopPropagation();var form=e.currentTarget;if(!form.checkValidity()){_this.setState({validated:true});/* Form has prop validated: set it to true, is like reportValidity() */}else if(!login(_this.state.data.email,_this.state.data.password))_this.setState({validated:true});};_this.state={validated:false,continueSelected:false,data:{email:'',password:''}};return _this;}_createClass(LogInForm,[{key:\"render\",value:function render(){var _this2=this;if(this.state.continueSelected)return/*#__PURE__*/React.createElement(Redirect,{to:\"/public\"});return/*#__PURE__*/React.createElement(AuthContext.Consumer,null,function(value){return/*#__PURE__*/React.createElement(Container,{className:\"h-100 align-items-center justify-content-center m-auto\"},/*#__PURE__*/React.createElement(Row,{className:\"h-100\"},/*#__PURE__*/React.createElement(Col,{xs:\"12\",md:\"6\",className:\"align-self-end align-self-md-center d-flex\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Rent\"),/*#__PURE__*/React.createElement(\"h1\",{className:\"text-danger\"},\"agram\")),/*#__PURE__*/React.createElement(Col,{xs:\"12\",md:\"6\",className:\"align-self-start align-self-md-center\"},/*#__PURE__*/React.createElement(Form,{noValidate:true,validated:_this2.state.validated,onSubmit:function onSubmit(e){_this2.onSubmit(e,value.login);}},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"mail\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Email address\"),/*#__PURE__*/React.createElement(Form.Control,{className:value.authError/* is defined */&&value.authError===2/* username is wrong */?'is-invalid':'',name:\"email\",type:\"email\",placeholder:\"Enter email\",value:_this2.state.data.email,onChange:function onChange(e){_this2.updateField(e.target.name,e.target.value);},required:true}),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},\"Enter a valid email.\")),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"password\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Password\"),/*#__PURE__*/React.createElement(Form.Control,{className:value.authError/* is defined */&&value.authError===1/* is wrong password */?'is-invalid':'',name:\"password\",type:\"password\",placeholder:\"Enter password\",value:_this2.state.data.password,onChange:function onChange(e){_this2.updateField(e.target.name,e.target.value);},required:true}),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},\"Enter a valid password.\")),/*#__PURE__*/React.createElement(Button,{variant:\"link\",className:\"float-left text-secondary\",onClick:function onClick(){return _this2.continue();}},\"Continue as Guest\"),/*#__PURE__*/React.createElement(Button,{variant:\"secondary\",className:\"float-right\",type:\"submit\"},\"Log In\")))));});}}]);return LogInForm;}(React.Component);export default LogInForm;","map":{"version":3,"sources":["/Users/davidefalcone/Universita/Polito/Web Applications I/exam1-car-rental-davidefalcone1 copia/client/src/components/Login.js"],"names":["React","Form","Row","Col","Button","Container","Redirect","AuthContext","LogInForm","props","continue","setState","continueSelected","updateField","name","value","state","data","onSubmit","e","login","preventDefault","stopPropagation","form","currentTarget","checkValidity","validated","email","password","authError","target","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Form, Row, Col, Button, Container} from 'react-bootstrap';\nimport {Redirect} from 'react-router-dom';\nimport {AuthContext} from '../AuthContext.js';\nclass LogInForm extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {validated : false, continueSelected:false, data : {email : '', password : ''}};\n  }\n  render() {\n    if(this.state.continueSelected)\n      return <Redirect to = '/public'/>;\n    return(\n      <AuthContext.Consumer>\n        {value =>\n          <Container className = 'h-100 align-items-center justify-content-center m-auto'>\n            <Row className = 'h-100'>\n              <Col xs = '12' md = '6' className = 'align-self-end align-self-md-center d-flex'>\n                <h1>Rent</h1><h1 className = 'text-danger'>agram</h1>\n              </Col>\n              <Col xs = '12' md = '6' className = 'align-self-start align-self-md-center'>\n                <Form noValidate validated = {this.state.validated} onSubmit = {(e)=>{this.onSubmit(e, value.login);}}>\n                  <Form.Group controlId = 'mail' >\n                    <Form.Label>Email address</Form.Label>\n                    <Form.Control className = {(value.authError /* is defined */ && value.authError === 2 /* username is wrong */) ? 'is-invalid' : ''} name = 'email' type=\"email\" placeholder=\"Enter email\" value = {this.state.data.email} onChange = {(e) => {this.updateField(e.target.name, e.target.value)}} required/>\n                    <Form.Control.Feedback type = 'invalid'>\n                      Enter a valid email.\n                    </Form.Control.Feedback>\n                  </Form.Group>\n                  <Form.Group controlId = 'password'>\n                    <Form.Label>Password</Form.Label>\n                    <Form.Control className = {(value.authError /* is defined */ && value.authError === 1 /* is wrong password */) ? 'is-invalid' : ''} name = 'password' type=\"password\" placeholder=\"Enter password\" value = {this.state.data.password} onChange = {(e) => {this.updateField(e.target.name, e.target.value)}} required/>\n                    <Form.Control.Feedback type = 'invalid'>\n                      Enter a valid password.\n                    </Form.Control.Feedback>\n                  </Form.Group >\n                  <Button variant = 'link' className = 'float-left text-secondary' onClick = {() => {return this.continue()}}>Continue as Guest</Button>\n                  <Button variant = 'secondary' className = 'float-right' type = 'submit'>Log In</Button>\n                </Form>\n              </Col>\n            </Row>\n          </Container>\n        }\n      </AuthContext.Consumer>\n    );\n  }\n  continue = () => {\n    this.setState({continueSelected: true});\n  }\n  /* Used with prop value of form components to implement a controlled component */\n  updateField = (name, value) => {\n    this.setState((state) => {\n      return ({data: {...state.data, [name]: value}});\n    });\n  }\n  /* Use the login function defined in App.\n   * The function is taken from the context. */\n  onSubmit = (e, login) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const form = e.currentTarget;\n    if(!form.checkValidity()){\n      this.setState({validated : true}); /* Form has prop validated: set it to true, is like reportValidity() */\n    }\n    else\n      if(!login(this.state.data.email, this.state.data.password))\n        this.setState({validated : true});\n  }\n}\nexport default LogInForm;\n"]},"metadata":{},"sourceType":"module"}