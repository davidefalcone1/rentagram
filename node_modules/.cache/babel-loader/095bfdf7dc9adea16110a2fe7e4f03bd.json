{"ast":null,"code":"import _objectSpread from\"/Users/davidefalcone/Universita/Polito/Web Applications I/exam1-car-rental-davidefalcone1 copia/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/davidefalcone/Universita/Polito/Web Applications I/exam1-car-rental-davidefalcone1 copia/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/davidefalcone/Universita/Polito/Web Applications I/exam1-car-rental-davidefalcone1 copia/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import moment from'moment';var user=undefined;export function getNews(){return new Promise(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(resolve,reject){var imageDirectory;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:imageDirectory=\"/res/news\";news=[{id:0,image:imageDirectory+\"carousel_a4_image\",title:\"Audi A4 available in Garage\",subtitle:\"Try the new Audi A4, available from 06/08\"},{id:1,image:imageDirectory+\"carousel_promo_image\",title:\"Special promo\",subtitle:\"Complete 3 rentals and get 10% off on future rentals.\"},{id:2,image:imageDirectory+\"carousel_giulia_image\",title:\"Alfa Romeo Giulia available in garage\",subtitle:\"TTry Alfa Romeo Giulia, available from 05/02.\"}];resolve(news);case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());}export function deleteRental(rental){return new Promise(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(resolve,reject){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"/api/rental/\".concat(rental.id),{method:'DELETE'});case 3:response=_context2.sent;if(!response.ok){reject();}resolve();_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);reject();case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}());}export function carList(){return new Promise(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(resolve,reject){var carsDirectory;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:carsDirectory=\"/res/cars\";cars=[{id:0,brand:\"Audi\",model:\"A1\",image:\"a1_image.jpg\",segment:3},{id:1,brand:\"Audi\",model:\"A1\",image:\"a1_image.jpg\",segment:3},{id:2,brand:\"Audi\",model:\"A4\",image:\"a4_image.jpg\",segment:2},{id:3,brand:\"Alfa Romeo\",model:\"Giulia\",image:\"giulia_image.jpg\",segment:2},{id:4,brand:\"Alfa Romeo\",model:\"Giulia\",image:\"giulia_image.jpg\",segment:2},{id:5,brand:\"Mercedes\",model:\"A-Class\",image:\"aclass_image.jpg\",segment:2},{id:6,brand:\"Mercedes\",model:\"C-Class\",image:\"cclass_image.jpg\",segment:1},{id:7,brand:\"Mercedes\",model:\"C-Class\",image:\"cclass_image.jpg\",segment:1},{id:8,brand:\"Fiat\",model:\"Panda\",image:\"panda_image.jpg\",segment:5},{id:9,brand:\"Fiat\",model:\"Panda\",image:\"panda_image.jpg\",segment:5}];resolve(cars);case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}());}export function addRental(rental){return new Promise(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(resolve,reject){var response,completeRental;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return fetch('/api/add',{method:'put',/* ERRORE: Ã¨ una POST */headers:{'Content-type':'application/json'},body:JSON.stringify(rental)});case 3:response=_context4.sent;_context4.next=6;return response.json();case 6:completeRental=_context4.sent;if(!response.ok)reject();resolve(_objectSpread(_objectSpread({},completeRental),{},{startDate:moment(completeRental.startDate,'YYYY-MM-DD'),endDate:moment(completeRental.endDate,'YYYY-MM-DD')}));_context4.next=14;break;case 11:_context4.prev=11;_context4.t0=_context4[\"catch\"](0);reject();case 14:case\"end\":return _context4.stop();}}},_callee4,null,[[0,11]]);}));return function(_x7,_x8){return _ref4.apply(this,arguments);};}());}export function getPrices(category,startDate,endDate){return new Promise(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(resolve,reject){var response,prices;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return fetch('/api/prices');case 3:response=_context5.sent;_context5.next=6;return response.json();case 6:prices=_context5.sent;if(!response.ok)reject();resolve(prices);_context5.next=14;break;case 11:_context5.prev=11;_context5.t0=_context5[\"catch\"](0);reject();case 14:case\"end\":return _context5.stop();}}},_callee5,null,[[0,11]]);}));return function(_x9,_x10){return _ref5.apply(this,arguments);};}());}var rentals=[];export function getAvailableCars(startDate,endDate,category){return new Promise(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(resolve,reject){var response,availableCars;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return fetch('/api/availableCars',{method:'post',headers:{'Content-type':'application/json'},body:JSON.stringify({category:category,startDate:startDate,endDate:endDate})});case 3:response=_context6.sent;_context6.next=6;return response.json();case 6:availableCars=_context6.sent;if(!response.ok)reject(availableCars);resolve(availableCars);_context6.next=14;break;case 11:_context6.prev=11;_context6.t0=_context6[\"catch\"](0);reject(_context6.t0);case 14:case\"end\":return _context6.stop();}}},_callee6,null,[[0,11]]);}));return function(_x11,_x12){return _ref6.apply(this,arguments);};}());}export function cancelRent(rentalID){return new Promise(function(resolve,reject){rentals=rentals.filter(function(r){return r.id!==rentalID;});resolve();});}export function rentalList(){return new Promise(/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(resolve,reject){var response,_rentals;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_context7.next=3;return fetch('/api/rentals');case 3:response=_context7.sent;_context7.next=6;return response.json();case 6:_rentals=_context7.sent;if(!response.ok)reject(_rentals);resolve(_rentals.map(function(rental){return _objectSpread(_objectSpread({},rental),{},{startDate:moment(rental.startDate,'YYYY-MM-DD'),endDate:moment(rental.endDate,'YYYY-MM-DD')});}));_context7.next=14;break;case 11:_context7.prev=11;_context7.t0=_context7[\"catch\"](0);reject(_context7.t0);case 14:case\"end\":return _context7.stop();}}},_callee7,null,[[0,11]]);}));return function(_x13,_x14){return _ref7.apply(this,arguments);};}());}export function isLogged(){return new Promise(/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(resolve,reject){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:resolve(user);case 1:case\"end\":return _context8.stop();}}},_callee8);}));return function(_x15,_x16){return _ref8.apply(this,arguments);};}());};export function login(email,password){return new Promise(/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(resolve,reject){var response,result;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.prev=0;_context9.next=3;return fetch('/api/login',{method:'post',headers:{'Content-type':'application/json'},body:JSON.stringify({email:email,password:password})});case 3:response=_context9.sent;_context9.next=6;return response.json();case 6:result=_context9.sent;if(!response.ok)reject(result.errors[0].msg);resolve(result);_context9.next=14;break;case 11:_context9.prev=11;_context9.t0=_context9[\"catch\"](0);reject(_context9.t0);case 14:case\"end\":return _context9.stop();}}},_callee9,null,[[0,11]]);}));return function(_x17,_x18){return _ref9.apply(this,arguments);};}());};export function logout(){return new Promise(/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(resolve,reject){return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:resolve();case 1:case\"end\":return _context10.stop();}}},_callee10);}));return function(_x19,_x20){return _ref10.apply(this,arguments);};}());};","map":{"version":3,"sources":["/Users/davidefalcone/Universita/Polito/Web Applications I/exam1-car-rental-davidefalcone1 copia/client/src/api/fetch.js"],"names":["moment","user","undefined","getNews","Promise","resolve","reject","imageDirectory","news","id","image","title","subtitle","deleteRental","rental","fetch","method","response","ok","carList","carsDirectory","cars","brand","model","segment","addRental","headers","body","JSON","stringify","json","completeRental","startDate","endDate","getPrices","category","prices","rentals","getAvailableCars","availableCars","cancelRent","rentalID","filter","r","rentalList","map","isLogged","login","email","password","result","errors","msg","logout"],"mappings":"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","sourcesContent":["import moment from 'moment';\nvar user = undefined\nexport function getNews() {\n  return new Promise(async function (resolve, reject) {\n    const imageDirectory = \"/res/news\"\n    news = [\n      { id: 0, image: imageDirectory + \"carousel_a4_image\", title: \"Audi A4 available in Garage\", subtitle: \"Try the new Audi A4, available from 06/08\" },\n      { id: 1, image: imageDirectory + \"carousel_promo_image\", title: \"Special promo\", subtitle: \"Complete 3 rentals and get 10% off on future rentals.\" },\n      { id: 2, image: imageDirectory + \"carousel_giulia_image\", title: \"Alfa Romeo Giulia available in garage\", subtitle: \"TTry Alfa Romeo Giulia, available from 05/02.\" }\n    ]\n    resolve(news)\n  });\n}\nexport function deleteRental(rental) {\n  return new Promise(async function (resolve, reject) {\n    try {\n      const response = await fetch(`/api/rental/${rental.id}`,\n        {\n          method: 'DELETE'\n        });\n      if (!response.ok) {\n        reject();\n      }\n      resolve();\n    } catch (e) {\n      reject();\n    }\n  });\n}\nexport function carList() {\n  return new Promise(async function (resolve, reject) {\n    const carsDirectory = \"/res/cars\"\n    cars = [\n      { id: 0, brand: \"Audi\", model: \"A1\", image: \"a1_image.jpg\", segment: 3 },\n      { id: 1, brand: \"Audi\", model: \"A1\", image: \"a1_image.jpg\", segment: 3 },\n      { id: 2, brand: \"Audi\", model: \"A4\", image: \"a4_image.jpg\", segment: 2 },\n      { id: 3, brand: \"Alfa Romeo\", model: \"Giulia\", image: \"giulia_image.jpg\", segment: 2 },\n      { id: 4, brand: \"Alfa Romeo\", model: \"Giulia\", image: \"giulia_image.jpg\", segment: 2 },\n      { id: 5, brand: \"Mercedes\", model: \"A-Class\", image: \"aclass_image.jpg\", segment: 2 },\n      { id: 6, brand: \"Mercedes\", model: \"C-Class\", image: \"cclass_image.jpg\", segment: 1 },\n      { id: 7, brand: \"Mercedes\", model: \"C-Class\", image: \"cclass_image.jpg\", segment: 1 },\n      { id: 8, brand: \"Fiat\", model: \"Panda\", image: \"panda_image.jpg\", segment: 5 },\n      { id: 9, brand: \"Fiat\", model: \"Panda\", image: \"panda_image.jpg\", segment: 5 },\n    ]\n    resolve(cars)\n  });\n}\nexport function addRental(rental) {\n  return new Promise(async function (resolve, reject) {\n    try {\n      const response = await fetch('/api/add', {\n        method: 'put',/* ERRORE: Ã¨ una POST */\n        headers: {\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify(rental)\n      });\n      const completeRental = await response.json();\n      if (!response.ok)\n        reject();\n      resolve({ ...completeRental, startDate: moment(completeRental.startDate, 'YYYY-MM-DD'), endDate: moment(completeRental.endDate, 'YYYY-MM-DD') });\n    } catch (e) {\n      reject();\n    }\n  });\n}\nexport function getPrices(category, startDate, endDate) {\n  return new Promise(async function (resolve, reject) {\n    try {\n      const response = await fetch('/api/prices');\n      const prices = await response.json();\n      if (!response.ok)\n        reject();\n      resolve(prices);\n    } catch (e) {\n      reject();\n    }\n  });\n}\nlet rentals = [];\nexport function getAvailableCars(startDate, endDate, category) {\n  return new Promise(async function (resolve, reject) {\n    try {\n      const response = await fetch('/api/availableCars', {\n        method: 'post',\n        headers: {\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify({ category, startDate, endDate })\n      });\n      const availableCars = await response.json();\n      if (!response.ok)\n        reject(availableCars);\n      resolve(availableCars);\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n\nexport function cancelRent(rentalID) {\n  return new Promise(function (resolve, reject) {\n    rentals = rentals.filter(r => r.id !== rentalID);\n    resolve();\n  });\n}\n\nexport function rentalList() {\n  return new Promise(async function (resolve, reject) {\n    try {\n      const response = await fetch('/api/rentals');\n      const rentals = await response.json();\n      if (!response.ok)\n        reject(rentals);\n      resolve(rentals.map((rental) => { return { ...rental, startDate: moment(rental.startDate, 'YYYY-MM-DD'), endDate: moment(rental.endDate, 'YYYY-MM-DD') } }));\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\nexport function isLogged() {\n  return new Promise(async function (resolve, reject) {\n    resolve(user)\n  });\n};\nexport function login(email, password) {\n  return new Promise(async function (resolve, reject) {\n    try {\n      const response = await fetch('/api/login', {\n        method: 'post',\n        headers: {\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify({ email, password })\n      });\n      const result = await response.json();\n      if (!response.ok)\n        reject(result.errors[0].msg);\n      resolve(result);\n    } catch (e) {\n      reject(e);\n    }\n  });\n};\nexport function logout() {\n  return new Promise(async function (resolve, reject) {\n    resolve()\n  });\n};\n"]},"metadata":{},"sourceType":"module"}